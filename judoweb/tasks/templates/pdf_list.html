{% extends 'base.html' %}
{% block content %}
    <div class="p-3">
        <h2>List of PDFs</h2>
        <ul>
        {% for pdf in page_obj %}
            <div class="p-2 bg-dark text-white" >
                <span>Uploaded by: {{ pdf.user.username }}</span>
                <a href="{{ pdf.archivo.url }}">{{ pdf.archivo.name }}</a>
                {% if user.is_superuser %}
                    <form method="POST" action="{% url 'cambiar_estado_pdf' %}" class="d-inline">
                        {% csrf_token %}
                        <input type="hidden" name="pdf_id" value="{{ pdf.id }}">
                        <input type="hidden" name="nuevo_estado" value="nuevo_estado_deseado">
                        <select name="estado" onchange="this.form.submit()">
                            <option value="pagado" {% if pdf.estado == 'pagado' %} selected {% endif %}>Pagado</option>
                            <option value="pendiente" {% if pdf.estado == 'pendiente' %} selected {% endif %}>Pendiente</option>
                            <option value="rechazado" {% if pdf.estado == 'rechazado' %} selected {% endif %}>Rechazado</option>
                        </select>
                    </form>
                {% endif %}
            </div>
        {% endfor %}
        </ul>
    </div>
{% endblock %}
